define([],(function(){const e=function(e,t){return(t=t||document).querySelector(e)},t=function(e,t){return t=t||document,Array.from(t.querySelectorAll(e))};return{attachPicker:function(e){const n=e.openId,a=e.modalId,o=e.closeId,c=e.cancelId,i=e.itemSelector,d=e.targetId,l=e.backdropId||"ai4t-modal-backdrop",u=document.getElementById(n),s=document.getElementById(a),r=document.getElementById(l),m=document.getElementById(o),v=document.getElementById(c),f=document.getElementById(d),y=function(){s&&r&&(s.style.display="none",r.style.display="none")},p=function(e){const t=e.getAttribute("data-value");f&&null!==t&&(f.value=t,f.dispatchEvent(new Event("input",{bubbles:!0}))),y()};u&&u.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),s&&r&&(s.style.display="block",r.style.display="block",s.focus())})),m&&m.addEventListener("click",y),v&&v.addEventListener("click",y),r&&r.addEventListener("click",y),document.addEventListener("keydown",(function(e){"Escape"===e.key&&y()})),t(i).forEach((function(e){e.addEventListener("click",(function(){p(e)})),e.addEventListener("keydown",(function(t){"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),p(e))}))}))},attachOutcomesModal:function(){const n=e("#ai4t-outcomes-browse"),a=e("#ai4t-outcomes-modal"),o=e("#ai4t-modal-backdrop"),c=e("#ai4t-outcomes-modal-close"),i=e("#ai4t-outcomes-modal-cancel"),d=e("#ai4t-outcomes-modal-insert"),l=e("#id_outcomes"),u=function(){a&&o&&(a.style.display="none",o.style.display="none")};n&&n.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),a&&o&&(a.style.display="block",o.style.display="block",a.focus())})),c&&c.addEventListener("click",u),i&&i.addEventListener("click",u),d&&d.addEventListener("click",(function(){if(!l)return void u();const e=t(".ai4t-outcome-checkbox:checked").map((function(e){return e.value})).filter(Boolean);if(!e.length)return void u();let n=l.value||"";n&&!/\n$/.test(n)&&(n+="\n"),l.value=n+e.join("\n"),l.dispatchEvent(new Event("input",{bubbles:!0})),u()})),o&&o.addEventListener("click",u)},initLanguageModal:function(){const n=e("#ai4t-language-browse"),a=e("#ai4t-language-modal"),o=e("#ai4t-modal-backdrop"),c=e("#ai4t-language-modal-close"),i=e("#ai4t-language-modal-cancel"),d=e("#id_language"),l=e("#id_languagecode"),u=function(){a&&o&&(a.style.display="none",o.style.display="none")},s=function(){if(!d||!l)return;const e=(d.value||"").trim();if(!e)return;const n=e.match(/\(([a-z]{2,3}(?:[_-][a-z]{2,3})?)\)/i);n?l.value=n[1].replace("-","_").toLowerCase():t(".ai4t-language-item").some((function(t){return(t.getAttribute("data-name")||"").toLowerCase()===e.toLowerCase()&&(l.value=t.getAttribute("data-code"),!0)}))};n&&n.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),a&&o&&(a.style.display="block",o.style.display="block",a.focus())})),c&&c.addEventListener("click",u),i&&i.addEventListener("click",u),o&&o.addEventListener("click",u),t(".ai4t-language-item").forEach((function(e){e.addEventListener("click",(function(){d&&(d.value=e.getAttribute("data-name")||"",d.dispatchEvent(new Event("input",{bubbles:!0}))),l&&(l.value=e.getAttribute("data-code")||""),u()}))})),d&&(d.addEventListener("blur",s),d.addEventListener("change",s))}}}));
//# sourceMappingURL=pickers.min.js.map