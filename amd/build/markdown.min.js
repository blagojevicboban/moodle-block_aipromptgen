define([],(function(){const e=function(e){if(!e)return e;let t=e;return t=t.replace(/([.!?])(\s*)(\d+\.\s+)/g,"$1\n$3"),t=t.replace(/(\*\*)(?:\s*\n+\s*|\s+)/g,"$1"),t=t.replace(/(?:\s*\n+\s*|\s+)(\*\*)/g,"$1"),t=t.replace(/\*\s+\*/g,"**"),t=t.replace(/([a-z\u00C0-\u00FF0-9.!?])(\s*)([*\-+] |\d+\. |#{1,6} )/g,"$1\n$3"),t=t.replace(/^\s*\+\s+/gm,"* "),t=t.replace(/([^\n])(\*\*\*\*.*?\*\*\*\*)/g,"$1\n\n$2"),t=t.replace(/(\*\*\*\*.*?\*\*\*\*)([^\n])/g,"$1\n\n$2"),t=t.replace(/(:)(\*\*\*)/g,"$1**\n* "),t=t.replace(/([^\n])(\*\*\*)(\s)/g,"$1**\n*$3"),t=t.replace(/([.?!)])\s*(\* )/g,"$1\n$2"),t=t.replace(/([^\n])(\*\*\*\*)(?=\S)/g,"**\n\n**"),t=t.replace(/([^\n])(\*\*|__)(?=[a-zA-Z0-9\u00C0-\u00FF])/g,"$1\n$2"),t=t.replace(/([^\n])(^|\s)([*\-+] )/g,"$1\n$3"),t=t.replace(/([^\n])(#{1,6} )/g,"$1\n$2"),t=t.replace(/([^\n])(^|\s)(\*\*\*|---|___)(\s|$)/gm,"$1\n$3"),t=t.replace(/([^\n])(\s)([IVX]+|[ivx]+)(\.)/g,"$1\n$3$4"),t=t.replace(/\n{3,}/g,"\n\n"),t},t=function(e){return e?e.replace(/!\[(.*?)\]\((.*?)\)/g,'<img src="$2" alt="$1" style="max-width:100%;height:auto;">').replace(/\[(.*?)\]\((.*?)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>').replace(/\*\*\*\*(.*?)\*\*\*\*/g,"<h3>$1</h3>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,'<code style="background:#eee;padding:2px 4px;border-radius:3px;">$1</code>'):""},l=function(e,t){return t?e+("ul"===t?"</ul>":"</ol>"):e},n=function(e,n){let r=n.match(/^([IVX]+)\.\s+(.*)/);return r?(e.inList&&"ol_roman"===e.listType||(e.html=l(e.html,e.listType),e.html+='<ol type="I">',e.inList=!0,e.listType="ol_roman"),e.html+="<li>"+t(r[2])+"</li>",!0):(r=n.match(/^[*\-+]\s+(.*)/),r?(e.inList&&"ul"===e.listType||(e.html=l(e.html,e.listType),e.html+="<ul>",e.inList=!0,e.listType="ul"),e.html+="<li>"+t(r[1])+"</li>",!0):(r=n.match(/^\d+\.\s+(.*)/),!!r&&(e.inList&&"ol"===e.listType||(e.html=l(e.html,e.listType),e.html+="<ol>",e.inList=!0,e.listType="ol"),e.html+="<li>"+t(r[1])+"</li>",!0)))};return{autofixMarkdown:e,renderMarkdown:function(r){if(!r)return"";const i=e(r).replace(/</g,"&lt;").replace(/>/g,"&gt;").split(/\r?\n/),s={html:"",inList:!1,inCodeBlock:!1,listType:null};return i.forEach((function(e){!function(e,r){if(r.trim().startsWith("```")){if(e.inCodeBlock)e.inCodeBlock=!1,e.html+="</code></pre>";else{e.html=l(e.html,e.listType),e.inList=!1,e.listType=null;const t="display:block;background:#f4f4f4;padding:10px;border-radius:5px;overflow-x:auto;font-family:monospace;";e.html+='<pre><code style="'+t+'">',e.inCodeBlock=!0}return}if(e.inCodeBlock)return void(e.html+=r+"\n");const i=r.trim();if(""===i)return e.html=l(e.html,e.listType),e.inList=!1,e.listType=null,void(e.html+="<br>");const s=[{prefix:"###### ",tag:"h6"},{prefix:"##### ",tag:"h5"},{prefix:"#### ",tag:"h4"},{prefix:"### ",tag:"h3"},{prefix:"## ",tag:"h2"},{prefix:"# ",tag:"h1"}];for(let n=0;n<s.length;n++)if(i.startsWith(s[n].prefix))return e.html=l(e.html,e.listType),e.inList=!1,e.listType=null,void(e.html+="<"+s[n].tag+">"+t(i.substring(s[n].prefix.length))+"</"+s[n].tag+">");if(i.match(/^(\*{3,}|-{3,}|_{3,})$/))return e.html=l(e.html,e.listType),e.inList=!1,e.listType=null,void(e.html+="<hr>");if(!n(e,i))if(i.startsWith("> ")){e.html=l(e.html,e.listType),e.inList=!1,e.listType=null;const n="border-left:4px solid #ccc;padding-left:10px;color:#666;";e.html+='<blockquote style="'+n+'">'+t(i.substring(2))+"</blockquote>"}else e.html=l(e.html,e.listType),e.inList=!1,e.listType=null,e.html+="<p>"+t(i.replace(/^\*(?!\*)\s*/,""))+"</p>"}(s,e)})),s.html=l(s.html,s.listType),s.html},renderText:function(t){if(!t)return"";var l=e(t);l=l.replace(/\*\*\*\*(.*?)\*\*\*\*/g,"$1");for(var n="";l!==n;)n=l,l=l.replace(/(\*\*|__)(.*?)\1/g,"$2").replace(/(\*|_)(.*?)\1/g,"$2");return(l=(l=(l=(l=(l=l.replace(/^#+\s+(.*)$/gm,"\n$1\n"+"-".repeat(20))).replace(/^[*\-+]\s+/gm,"- ")).replace(/```/g,"")).replace(/^- \s*\*+/gm,"")).replace(/\n{3,}/g,"\n\n")).trim()}}}));
//# sourceMappingURL=markdown.min.js.map