define([],(function(){const e=function(e,t){return(t=t||document).querySelector(e)},t=function(e){this.node=document.getElementById(e),this.backdrop=document.getElementById("ai4t-modal-backdrop")};t.prototype.open=function(e){if(this.node){if("function"==typeof e)try{e()}catch(e){}this.node.style.display="block",this.backdrop&&(this.backdrop.style.display="block"),this.node.focus()}},t.prototype.close=function(){this.node&&(this.node.style.display="none",this.backdrop&&(this.backdrop.style.display="none"))};return{initAgeModal:function(){const i=new t("ai4t-age-modal"),n=e("#ai4t-age-browse"),a=e("#ai4t-age-modal-close"),o=e("#ai4t-age-modal-cancel"),d=e("#ai4t-age-modal-insert"),c=e("#id_agerange"),s=e("#ai4t-age-exact"),l=e("#ai4t-age-from"),r=e("#ai4t-age-to"),u=e("#ai4t-age-mode-exact"),v=e("#ai4t-age-mode-range"),f=function(){u&&u.checked?(s&&s.removeAttribute("disabled"),l&&l.setAttribute("disabled","disabled"),r&&r.setAttribute("disabled","disabled")):(s&&s.setAttribute("disabled","disabled"),l&&l.removeAttribute("disabled"),r&&r.removeAttribute("disabled"))},b=function(){if(!c)return;const e=(c.value||"").trim();if(!e)return u&&(u.checked=!0),s&&(s.value=""),l&&(l.value=""),r&&(r.value=""),void f();if(/^\d+$/.test(e))return s&&(s.value=e),l&&(l.value=""),r&&(r.value=""),u&&(u.checked=!0),void f();const t=e.match(/^\s*(\d+)\s*[-\u2013]\s*(\d+)\s*$/u);return t?(s&&(s.value=""),l&&(l.value=t[1]),r&&(r.value=t[2]),v&&(v.checked=!0),void f()):void 0},p=function(){if(!c)return void i.close();const e=(s&&s.value||"").trim(),t=(l&&l.value||"").trim(),n=(r&&r.value||"").trim(),a=u&&u.checked;if(a&&e)return c.value=e,void i.close();if(!a&&t&&n){let e=parseInt(t,10),a=parseInt(n,10);if(!isNaN(e)&&!isNaN(a)){if(e>a){const t=e;e=a,a=t}return c.value=e+"-"+a,void i.close()}}i.close()};n&&n.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),i.open(b)})),a&&a.addEventListener("click",(function(){i.close()})),o&&o.addEventListener("click",(function(){i.close()})),d&&d.addEventListener("click",p),u&&u.addEventListener("change",f),v&&v.addEventListener("change",f),document.addEventListener("keydown",(function(e){"Escape"===e.key&&i.close()}))}}}));
//# sourceMappingURL=age.min.js.map